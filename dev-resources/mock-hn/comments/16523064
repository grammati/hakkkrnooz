<html op="item"><head><meta name="referrer" content="origin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" type="text/css" href="news.css?ZlOjL55sRmhJBqfwi2jb">
        <link rel="shortcut icon" href="favicon.ico">
        <title>Open-sourcing a 10x reduction in Apache Cassandra tail latency | Hacker News</title></head><body><center><table id="hnmain" border="0" cellpadding="0" cellspacing="0" width="85%" bgcolor="#f6f6ef">
        <tr><td bgcolor="#ff6600"><table border="0" cellpadding="0" cellspacing="0" width="100%" style="padding:2px"><tr><td style="width:18px;padding-right:4px"><a href="https://news.ycombinator.com"><img src="y18.gif" width="18" height="18" style="border:1px white solid;"></a></td>
                  <td style="line-height:12pt; height:10px;"><span class="pagetop"><b class="hnname"><a href="news">Hacker News</a></b>
              <a href="newest">new</a> | <a href="newcomments">comments</a> | <a href="show">show</a> | <a href="ask">ask</a> | <a href="jobs">jobs</a> | <a href="submit">submit</a>            </span></td><td style="text-align:right;padding-right:4px;"><span class="pagetop">
                              <a href="login?goto=item%3Fid%3D16523064">login</a>
                          </span></td>
              </tr></table></td></tr>
<tr style="height:10px"></tr><tr><td><table class="fatitem" border="0">
        <tr class='athing' id='16523064'>
      <td align="right" valign="top" class="title"><span class="rank"></span></td>      <td valign="top" class="votelinks"><center><a id='up_16523064' href='vote?id=16523064&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="title"><a href="https://engineering.instagram.com/open-sourcing-a-10x-reduction-in-apache-cassandra-tail-latency-d64f86b43589" class="storylink">Open-sourcing a 10x reduction in Apache Cassandra tail latency</a><span class="sitebit comhead"> (<a href="from?site=engineering.instagram.com"><span class="sitestr">engineering.instagram.com</span></a>)</span></td></tr><tr><td colspan="2"></td><td class="subtext">
        <span class="score" id="score_16523064">359 points</span> by <a href="user?id=mikeyk" class="hnuser">mikeyk</a> <span class="age"><a href="item?id=16523064">16 hours ago</a></span> <span id="unv_16523064"></span> | <a href="hide?id=16523064&amp;goto=item%3Fid%3D16523064">hide</a> | <a href="https://hn.algolia.com/?query=Open-sourcing%20a%2010x%20reduction%20in%20Apache%20Cassandra%20tail%20latency&sort=byDate&dateRange=all&type=story&storyText=false&prefix&page=0" class="hnpast">past</a> | <a href="https://www.google.com/search?q=Open-sourcing%20a%2010x%20reduction%20in%20Apache%20Cassandra%20tail%20latency">web</a> | <a href="fave?id=16523064&amp;auth=2af3647360bc2163a4fd5968687cda6bd19aede8">favorite</a> | <a href="item?id=16523064">136&nbsp;comments</a>              </td></tr>
            <tr style="height:10px"></tr><tr><td colspan="2"></td><td>
          <form method="post" action="comment"><input type="hidden" name="parent" value="16523064"><input type="hidden" name="goto" value="item?id=16523064"><input type="hidden" name="hmac" value="f70d71dacb2313587325b5b4a48e6d7900e79bbe"><textarea name="text" rows="6" cols="60"></textarea>
                <br><br><input type="submit" value="add comment"></form>
      </td></tr>
  </table><br><br>
  <table border="0" class='comment-tree'>
            <tr class='athing comtr ' id='16524263'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_16524263' href='vote?id=16524263&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=the8472" class="hnuser">the8472</a> <span class="age"><a href="item?id=16524263">14 hours ago</a></span> <span id="unv_16524263"></span><span class="par"></span> <a class="togg" n="26" href="javascript:void(0)" onclick="return toggle(event, 16524263)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00"><i>&gt; The graph shows that a Cassandra server instance could spend 2.5% of runtime on garbage collections instead of serving client requests. The GC overhead obviously had a big impact on our P99 latency</i><p>No, this is not obvious. If you have a fully concurrent GC then spending 25 out of 1000 CPU cycles on memory management does not &quot;obviously&quot; have an impact on your 99th percentile latency. It would primarily impact your throughput (by 2.5%), just like any other thing consuming CPU cycles.<p><i>&gt; We defined a metric called GC stall percentage to measure the percentage of time a Cassandra server was doing stop-the-world GC (Young Gen GC) and could not serve client requests.</i><p>Again, this metric doesn&#x27;t tell you anything if you don&#x27;t know how long each of the pauses are. If they are at the limit infinitesimally small then you are again only measuring the impact on throughput, not latency.<p>Certainly, GCs with long STW pauses do impact latency, but then you need to measure histograms of absolute pause times, not averages of ratios relative to application time. That&#x27;s just a silly metric.<p>And neither does the article mention which JVM or GC they&#x27;re using. Absent further information they might have gotten their 10x improvement relative to some especially poor choice of JVM and GC.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524263&amp;goto=item%3Fid%3D16523064%2316524263">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16525338'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16525338' href='vote?id=16525338&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=sreque" class="hnuser">sreque</a> <span class="age"><a href="item?id=16525338">12 hours ago</a></span> <span id="unv_16525338"></span><span class="par"></span> <a class="togg" n="11" href="javascript:void(0)" onclick="return toggle(event, 16525338)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">you clearly didn&#x27;t read the post very closely. They said 2.5% of CPU cycles were spent on <i>stop-the-world</i> young generation collections, not on the sum total of all memory mangement. That means that 2.5% of the time the app is entirely stalled on just these collections. Given that stop-the-world pauses are never evenly distributed throughout time, it should be very much expected that this much GC stalling would affect p99 latencies.<p>It&#x27;s pretty much accepted everywhere that GCs perform terribly for databases. Modern GCs are great at handling small, very short-lived memory allocations, and that&#x27;s about it. Just about any other workload and manual memory management ends up being a much better use of your time than GC tuning.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16525338&amp;goto=item%3Fid%3D16523064%2316525338">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16525865'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16525865' href='vote?id=16525865&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=b4lancesh33t" class="hnuser">b4lancesh33t</a> <span class="age"><a href="item?id=16525865">10 hours ago</a></span> <span id="unv_16525865"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16525865)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">&gt; Given that stop-the-world pauses are never evenly distributed throughout time<p>That is not a given. And, even distribution is only part of the equation. If they are sufficiently short, then even being somewhat unevenly distributed should not have much of an impact on latency. For example, if the max length of a pause were 1ms, and 99p latency were 15ms, you&#x27;d have to be fairly unlucky to see a 33% increase in latency99 due to GC. That would entail 5 of 25 pauses happening during a 20ms period in a 1s window.<p>(This idea is not purely hypothetical. For example, Go&#x27;s GC has very low STW periods.)<p>&gt; It&#x27;s pretty much accepted everywhere<p>Eh. Apparently everyone thinks C is the best language for cryptography and other secure but not particularly perf sensitive code. Go figure. Sometimes the wisdom of the masses is not wisdom. Best not to appeal to it during argumentation.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16525865&amp;goto=item%3Fid%3D16523064%2316525865">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
          <tr class='athing comtr ' id='16525654'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16525654' href='vote?id=16525654&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=nvarsj" class="hnuser">nvarsj</a> <span class="age"><a href="item?id=16525654">11 hours ago</a></span> <span id="unv_16525654"></span><span class="par"></span> <a class="togg" n="9" href="javascript:void(0)" onclick="return toggle(event, 16525654)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">So why do people keep building latency sensitive things in the JVM? And then they manage to get hugely popular?<p>Cassandra is a constant struggle with the GC. I’d guess the cost of running it is at least an order of magnitude greater compared to if it had been implemented in c++ or something more sensible.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16525654&amp;goto=item%3Fid%3D16523064%2316525654">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16528085'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16528085' href='vote?id=16528085&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=manigandham" class="hnuser">manigandham</a> <span class="age"><a href="item?id=16528085">10 minutes ago</a></span> <span id="unv_16528085"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16528085)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Many of these open-source databases started as internal projects inside big companies, where Java&#x2F;JVM allowed for more productivity and cross-platform deployment with more skill reuse of the team. Then they grew from there and now it&#x27;s too late to rewrite the whole thing.<p>If you were starting a database-focused company from the beginning than choosing C++ is a better decision, which is exactly what ScyllaDB has done with their cassandra clone. Along with general algorithm and decision improvements, it&#x27;ll provide 10-100x the same performance at lower latency on the same server.<p>We&#x27;re also starting to see more projects written in Go now, which is still a managed runtime but usually better at handling these kind of low-level systems.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16528085&amp;goto=item%3Fid%3D16523064%2316528085">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16528118'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="160"></td><td valign="top" class="votelinks"><center><a id='up_16528118' href='vote?id=16528118&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=nvarsj" class="hnuser">nvarsj</a> <span class="age"><a href="item?id=16528118">0 minutes ago</a></span> <span id="unv_16528118"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16528118)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Go is a much better choice for systems work. Largely because the GC has a low pause (sub ms) target. I&#x27;d still be hesitant to use it for very latency sensitive things, or memory intensive applications. Prometheus, for example, has struggled with golang&#x27;s memory management (bad memory fragmentation, wasteful memory usage). But I think it&#x27;s a great compromise if you don&#x27;t want to deal with memory management.<span>
              </span><div class='reply'>        <p><font size="1">
                  </font>
      </div></td></tr>
      </table></td></tr>
      <tr class='athing comtr ' id='16526033'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16526033' href='vote?id=16526033&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=jjirsa" class="hnuser">jjirsa</a> <span class="age"><a href="item?id=16526033">10 hours ago</a></span> <span id="unv_16526033"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16526033)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">To be fair, a lot of big companies know how to tune the JVM. A TON of HUGE companies write a LOT of java. What you consider a constant struggle, a lot of very large companies consider trivial.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16526033&amp;goto=item%3Fid%3D16523064%2316526033">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16528082'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="160"></td><td valign="top" class="votelinks"><center><a id='up_16528082' href='vote?id=16528082&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=nvarsj" class="hnuser">nvarsj</a> <span class="age"><a href="item?id=16528082">11 minutes ago</a></span> <span id="unv_16528082"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16528082)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">I&#x27;m not sure it&#x27;s trivial. Tuning the JVM is an entire cottage industry. JVM performance experts can make 1000+&#x2F;day tuning the JVM and are in high demand. Companies spend huge amounts of engineering effort to keep the JVM running smoothly. I used to be involved in this side of things pretty heavily at a HFT firm, which almost exclusively used Java.<p>In my opinion it&#x27;s a colossal waste of resources. Classic example of using the wrong tool for the job.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16528082&amp;goto=item%3Fid%3D16523064%2316528082">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
      <tr class='athing comtr ' id='16527156'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16527156' href='vote?id=16527156&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=mlla" class="hnuser">mlla</a> <span class="age"><a href="item?id=16527156">5 hours ago</a></span> <span id="unv_16527156"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16527156)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Good Q. You might like to check ScyllaDB written in C++, which is supposed to have considerably better performance than Cassandra (also low tail-latency) and a level of compatibility with it: <a href="https:&#x2F;&#x2F;www.scylladb.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.scylladb.com&#x2F;</a><span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16527156&amp;goto=item%3Fid%3D16523064%2316527156">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
    <tr class='athing comtr ' id='16525762'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16525762' href='vote?id=16525762&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=thefounder" class="hnuser">thefounder</a> <span class="age"><a href="item?id=16525762">11 hours ago</a></span> <span id="unv_16525762"></span><span class="par"></span> <a class="togg" n="3" href="javascript:void(0)" onclick="return toggle(event, 16525762)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Apparently these people enjoy GC&#x2F;JVM languages more than C++.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16525762&amp;goto=item%3Fid%3D16523064%2316525762">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16527602'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="160"></td><td valign="top" class="votelinks"><center><a id='up_16527602' href='vote?id=16527602&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=chii" class="hnuser">chii</a> <span class="age"><a href="item?id=16527602">2 hours ago</a></span> <span id="unv_16527602"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16527602)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">GC languages like Java is much easier to write, and can be made performant when required.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16527602&amp;goto=item%3Fid%3D16523064%2316527602">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16528069'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="200"></td><td valign="top" class="votelinks"><center><a id='up_16528069' href='vote?id=16528069&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=nvarsj" class="hnuser">nvarsj</a> <span class="age"><a href="item?id=16528069">15 minutes ago</a></span> <span id="unv_16528069"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16528069)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Yes, this is the reason why Java is chosen. But I feel pretty strongly that databases are system engineering problems, and should be written using a proper systems language.<p>Something like Java makes implementation easier, but operation more difficult and costly.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16528069&amp;goto=item%3Fid%3D16523064%2316528069">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
            <tr class='athing comtr ' id='16524372'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16524372' href='vote?id=16524372&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=fdeliege" class="hnuser">fdeliege</a> <span class="age"><a href="item?id=16524372">14 hours ago</a></span> <span id="unv_16524372"></span><span class="par"></span> <a class="togg" n="7" href="javascript:void(0)" onclick="return toggle(event, 16524372)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Both code and benchmark are open sourced. We&#x27;d love to hear how it performs for you.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524372&amp;goto=item%3Fid%3D16523064%2316524372">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16524782'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16524782' href='vote?id=16524782&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=viraptor" class="hnuser">viraptor</a> <span class="age"><a href="item?id=16524782">13 hours ago</a></span> <span id="unv_16524782"></span><span class="par"></span> <a class="togg" n="6" href="javascript:void(0)" onclick="return toggle(event, 16524782)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">This is a valid criticism of the methodology &#x2F; explanation. It&#x27;s not about the results. You can agree with the positive results (and they&#x27;re great! - you&#x27;ve done awesome work and clearly show an improvement) and still say the explanation how&#x2F;why they were achieved is not great.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524782&amp;goto=item%3Fid%3D16523064%2316524782">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16524878'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16524878' href='vote?id=16524878&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=zenonu" class="hnuser">zenonu</a> <span class="age"><a href="item?id=16524878">13 hours ago</a></span> <span id="unv_16524878"></span><span class="par"></span> <a class="togg" n="5" href="javascript:void(0)" onclick="return toggle(event, 16524878)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c5a">Exactly. Immediately from the premise of the paper, I was looking forward to a discussion on how they tried various strategies to tune their JVM&#x2F;GC parameters and found nothing. The &quot;well I guess we gotta replace this with a C++ solution&quot; sentiment smacks of poor software engineering practice, despite the results.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524878&amp;goto=item%3Fid%3D16523064%2316524878">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16524913'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="160"></td><td valign="top" class="votelinks"><center><a id='up_16524913' href='vote?id=16524913&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=viraptor" class="hnuser">viraptor</a> <span class="age"><a href="item?id=16524913">13 hours ago</a></span> <span id="unv_16524913"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16524913)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">That you didn&#x27;t find it, doesn&#x27;t mean they didn&#x27;t do any. Maybe it wasn&#x27;t worth mentioning. Maybe they wanted to keep the post short. Some team successfully did a storage engine transplant and you&#x27;re saying they&#x27;re doing poor engineering?<p>That&#x27;s definitely not what I was suggesting in my comment.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524913&amp;goto=item%3Fid%3D16523064%2316524913">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
    <tr class='athing comtr ' id='16525294'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="160"></td><td valign="top" class="votelinks"><center><a id='up_16525294' href='vote?id=16525294&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=kbenson" class="hnuser">kbenson</a> <span class="age"><a href="item?id=16525294">12 hours ago</a></span> <span id="unv_16525294"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16525294)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">&gt; The &quot;well I guess we gotta replace this with a C++ solution&quot; sentiment smacks of poor software engineering practice, despite the results.<p>On the flip side, recognizing when you are not efficiently using your time to solve a problem with the current approach and deciding to switch to another one is what I would consider a vital part of <i>good</i> software engineering, and also one of the hardest things to become good at without a lot of experience.<p>I&#x27;m not sure that&#x27;s the case here, but I don&#x27;t doubt it&#x27;s <i>possible</i> they could easily have wasted more time testing and tweaking Java than it took to implement this solution.  Whether that&#x27;s how it would have (or possible even did to a degree) played out is an open question.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16525294&amp;goto=item%3Fid%3D16523064%2316525294">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
    <tr class='athing comtr ' id='16525169'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="160"></td><td valign="top" class="votelinks"><center><a id='up_16525169' href='vote?id=16525169&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=archi42" class="hnuser">archi42</a> <span class="age"><a href="item?id=16525169">12 hours ago</a></span> <span id="unv_16525169"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16525169)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Good memory management is important for a high performance, low latency DBMS. I don&#x27;t see how getting rid of GC is bad engineering practice. If a tool is not well suited for a problem, use another tool. Could you please explain your opinion?<p>&#x2F;&#x2F;Edit: removed 2nd part, which wasn&#x27;t really that important anyway...<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16525169&amp;goto=item%3Fid%3D16523064%2316525169">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16527109'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="200"></td><td valign="top" class="votelinks"><center><a id='up_16527109' href='vote?id=16527109&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=tibbetts" class="hnuser">tibbetts</a> <span class="age"><a href="item?id=16527109">5 hours ago</a></span> <span id="unv_16527109"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16527109)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">That might be an argument for not using Cassandra. It’s a pretty big leap to reimpmenting half of Cassandra in c++.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16527109&amp;goto=item%3Fid%3D16523064%2316527109">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
            <tr class='athing comtr ' id='16524781'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16524781' href='vote?id=16524781&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=foolfoolz" class="hnuser">foolfoolz</a> <span class="age"><a href="item?id=16524781">13 hours ago</a></span> <span id="unv_16524781"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16524781)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">classic hacker news comment.<p>this thing you built and open sourced, has gotten you real measurable results? allow me to list the many ways you’re probably wrong and doing it incorrectly<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524781&amp;goto=item%3Fid%3D16523064%2316524781">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16526543'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16526543' href='vote?id=16526543&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=discoursism" class="hnuser">discoursism</a> <span class="age"><a href="item?id=16526543">8 hours ago</a></span> <span id="unv_16526543"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16526543)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Measurable results are all well and good, but it can be helpful to know how the baseline was established. Measurable results aren&#x27;t &quot;portable&quot; without a well-established baseline.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16526543&amp;goto=item%3Fid%3D16523064%2316526543">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
      <tr class='athing comtr ' id='16524796'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16524796' href='vote?id=16524796&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=teacpde" class="hnuser">teacpde</a> <span class="age"><a href="item?id=16524796">13 hours ago</a></span> <span id="unv_16524796"></span><span class="par"></span> <a class="togg" n="5" href="javascript:void(0)" onclick="return toggle(event, 16524796)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">&gt; If you have a fully concurrent GC then spending 25 out of 1000 CPU cycles on memory management does not &quot;obviously&quot; have an impact on your 99th percentile latency.<p>I try to understand the meaning. Is it saying the latency caused be GC is applied to all requests, not just the ones that observe 99th percentile latency?<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524796&amp;goto=item%3Fid%3D16523064%2316524796">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16524865'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16524865' href='vote?id=16524865&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=dtparr" class="hnuser">dtparr</a> <span class="age"><a href="item?id=16524865">13 hours ago</a></span> <span id="unv_16524865"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16524865)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">It&#x27;s saying that whether it affects latency or just throughput depends on how those pauses are distributed in absolute terms, not just the ratio.  There&#x27;s a big difference in 99th percentile latency between a 1ms pause every 400ms and a 10 second pause every 67 minutes, but they both work out to 2.5% by the ratio metric.<p>So yes, at the `infinitesimally small` end, time would be &#x27;stolen&#x27; evenly from all request threads and would not be a contributing factor to the 99th percentile.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524865&amp;goto=item%3Fid%3D16523064%2316524865">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
    <tr class='athing comtr ' id='16524911'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16524911' href='vote?id=16524911&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=the8472" class="hnuser">the8472</a> <span class="age"><a href="item?id=16524911">13 hours ago</a></span> <span id="unv_16524911"></span><span class="par"></span> <a class="togg" n="3" href="javascript:void(0)" onclick="return toggle(event, 16524911)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">No, that would be an incremental GC working in very small time slices.<p>A concurrent GC spends CPU cycles on different cores to do its work, which means it will not cause latency outliers in the threads processing the requests. They are still CPU cycles you don&#x27;t have to serve other requests, hence they still affect throughput.<p>That is a simplified explanation of course, there are a lot of caveats.<p>In my original post I was mostly speaking about the measurement though, since they are measuring throughput when they are concerned about latency, those are somewhat related but depending on circumstances only weakly so.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524911&amp;goto=item%3Fid%3D16523064%2316524911">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16525269'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16525269' href='vote?id=16525269&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=ninkendo" class="hnuser">ninkendo</a> <span class="age"><a href="item?id=16525269">12 hours ago</a></span> <span id="unv_16525269"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16525269)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">What about the requests that are processed by a core that&#x27;s doing a GC?  Wouldn&#x27;t that cause a higher P99 latency exactly as you&#x27;d expect?<p>Spending 2.5% of cycles on GC doesn&#x27;t mean those cycles are perfectly distributed.  The distribution of GC work onto cores is bound to have some cores doing more work than others, which would (I would think) manifest itself as some requests that land on an unlucky core getting more latency.  Isn&#x27;t it totally expected that this would cause a P99 latency spike?<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16525269&amp;goto=item%3Fid%3D16523064%2316525269">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16525422'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="160"></td><td valign="top" class="votelinks"><center><a id='up_16525422' href='vote?id=16525422&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=the8472" class="hnuser">the8472</a> <span class="age"><a href="item?id=16525422">11 hours ago</a></span> <span id="unv_16525422"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16525422)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Maybe if you operated your system at the saturation point, which you really don&#x27;t want to do in practice. Instead you want your queues to be mostly empty. Bursts are inevitable but bursts coinciding with GC doing work hopefully is a beyond 99th percentile thing. Of course if we&#x27;re speaking purely theoretical we could also assume spherical cows in a vacuum and say that requests don&#x27;t burst and simply arrive in a metronome-like trickle and then the spikes evaporate too. This is basically queuing theory.<p>And you could also use more CPU cores than request workers, that way you will always have spare core capacity and thus your latency will not be directly impacted. That is if you <i>really really</i> value latency more than throughput.<p>Again, my main point is that throughput and latency are not the same thing. There is some relation in so far that you cannot fulfill latency promises if your throughput is insufficient and your queues start filling up. But below the saturation point it&#x27;s a lot more complicated, especially in parallel systems with bursty arrivals.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16525422&amp;goto=item%3Fid%3D16523064%2316525422">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
                      <tr class='athing comtr ' id='16523653'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_16523653' href='vote?id=16523653&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=dikanggu" class="hnuser">dikanggu</a> <span class="age"><a href="item?id=16523653">15 hours ago</a></span> <span id="unv_16523653"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16523653)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">We do want to contribute our work back to the Cassandra upstream, instead of keeping it as a fork. So that more users from C* community can benefit from the improvements. The pluggable storage engine is an ambitious project (<a href="https:&#x2F;&#x2F;issues.apache.org&#x2F;jira&#x2F;browse&#x2F;CASSANDRA-13474" rel="nofollow">https:&#x2F;&#x2F;issues.apache.org&#x2F;jira&#x2F;browse&#x2F;CASSANDRA-13474</a>). Any help will be appreciated!<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523653&amp;goto=item%3Fid%3D16523064%2316523653">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16524771'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16524771' href='vote?id=16524771&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=russellspitzer" class="hnuser">russellspitzer</a> <span class="age"><a href="item?id=16524771">13 hours ago</a></span> <span id="unv_16524771"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16524771)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Saw you talking about this on the Distributed Data Show<p><a href="https:&#x2F;&#x2F;academy.datastax.com&#x2F;content&#x2F;distributed-data-show-episode-37-cassandra-instagram-dikang-gu" rel="nofollow">https:&#x2F;&#x2F;academy.datastax.com&#x2F;content&#x2F;distributed-data-show-e...</a><span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524771&amp;goto=item%3Fid%3D16523064%2316524771">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
                <tr class='athing comtr ' id='16523654'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_16523654' href='vote?id=16523654&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=gfosco" class="hnuser">gfosco</a> <span class="age"><a href="item?id=16523654">15 hours ago</a></span> <span id="unv_16523654"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16523654)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">RocksDB is used all over Facebook, powers the entire social graph.  Great storage engine that pairs well with multiple DBMS: MySQL, Mongo, Cassandra... We&#x27;ll be at Percona Live 2018 in April, giving several talks, and are looking forward to hanging out and talking with users in our lounge area.  We&#x27;re working hard to support our open source community as well!  <a href="https:&#x2F;&#x2F;github.com&#x2F;facebook&#x2F;rocksdb" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;facebook&#x2F;rocksdb</a><span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523654&amp;goto=item%3Fid%3D16523064%2316523654">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
              <tr class='athing comtr ' id='16523596'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_16523596' href='vote?id=16523596&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=openasocket" class="hnuser">openasocket</a> <span class="age"><a href="item?id=16523596">15 hours ago</a></span> <span id="unv_16523596"></span><span class="par"></span> <a class="togg" n="15" href="javascript:void(0)" onclick="return toggle(event, 16523596)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">I&#x27;m not an expert on these things, but it seems to me if you&#x27;re implementing a database in Java you wouldn&#x27;t want to keep your data on the JVM Heap, as this seems to indicate. My understanding is that in most applications (like servers) the average object lives for a very short period of time, and most GC implementations are built from that idea. But, in a database, especially an in-memory database, the majority of the objects are going to live for a very long time. That makes the mark phase of GC a lot more expensive, puts more pressure on the generations, etc.<p>Is my guess here correct, or are there things I&#x27;m missing or mistaken on?<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523596&amp;goto=item%3Fid%3D16523064%2316523596">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523716'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16523716' href='vote?id=16523716&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=jakewins" class="hnuser">jakewins</a> <span class="age"><a href="item?id=16523716">15 hours ago</a></span> <span id="unv_16523716"></span><span class="par"></span> <a class="togg" n="6" href="javascript:void(0)" onclick="return toggle(event, 16523716)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">This is correct; the standard approach here is to use regular c-style memory management for the data the system is managing, and the JVM heap only for the database &quot;infrastructure&quot;.<p>This hybrid approach gives the benefit of a managed runtime and safety of GC for most of your code, but allows the performance of raw pointers&#x2F;malloc for key code paths.<p>Some examples of this pattern on the JVM:<p>- The Neo4j Page Cache, Muninn, <a href="https:&#x2F;&#x2F;github.com&#x2F;neo4j&#x2F;neo4j&#x2F;blob&#x2F;3.4&#x2F;community&#x2F;io&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;neo4j&#x2F;io&#x2F;pagecache&#x2F;impl&#x2F;muninn&#x2F;MuninnPageCache.java#L58" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;neo4j&#x2F;neo4j&#x2F;blob&#x2F;3.4&#x2F;community&#x2F;io&#x2F;src&#x2F;mai...</a><p>- The Netty projects implementation of jemalloc for the JVM: <a href="https:&#x2F;&#x2F;github.com&#x2F;netty&#x2F;netty&#x2F;blob&#x2F;4.1&#x2F;buffer&#x2F;src&#x2F;main&#x2F;java&#x2F;io&#x2F;netty&#x2F;buffer&#x2F;PooledByteBufAllocator.java" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;netty&#x2F;netty&#x2F;blob&#x2F;4.1&#x2F;buffer&#x2F;src&#x2F;main&#x2F;java...</a><span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523716&amp;goto=item%3Fid%3D16523064%2316523716">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16526630'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16526630' href='vote?id=16526630&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=ndesaulniers" class="hnuser">ndesaulniers</a> <span class="age"><a href="item?id=16526630">7 hours ago</a></span> <span id="unv_16526630"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16526630)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">&gt; but allows the performance of ... malloc for key code paths.<p>Everything is relative, I guess.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16526630&amp;goto=item%3Fid%3D16523064%2316526630">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
    <tr class='athing comtr ' id='16524172'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16524172' href='vote?id=16524172&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=tkahnoski" class="hnuser">tkahnoski</a> <span class="age"><a href="item?id=16524172">14 hours ago</a></span> <span id="unv_16524172"></span><span class="par"></span> <a class="togg" n="4" href="javascript:void(0)" onclick="return toggle(event, 16524172)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">If so any JVM based datastore could probably benefit.<p>I wonder how long before we see a similar result from ElasticSearch. (Only other huge JVM based store I can think of).<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524172&amp;goto=item%3Fid%3D16523064%2316524172">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16524480'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16524480' href='vote?id=16524480&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=ddorian43" class="hnuser">ddorian43</a> <span class="age"><a href="item?id=16524480">13 hours ago</a></span> <span id="unv_16524480"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16524480)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Hbase is going offheap as much as possible. Voltdb uses java for management and c++ for low-level.<p>They will write c++ in java eventually. Depending on how much performance you REALLY need.<p>The same for elasticseach, if you want performance you need to do the same thing scylladb did to cassandra (per-core-sharding, skip filesystem across cores etc)<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524480&amp;goto=item%3Fid%3D16523064%2316524480">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16524905'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="160"></td><td valign="top" class="votelinks"><center><a id='up_16524905' href='vote?id=16524905&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=ddorian43" class="hnuser">ddorian43</a> <span class="age"><a href="item?id=16524905">13 hours ago</a></span> <span id="unv_16524905"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16524905)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">In elasticsearcch terms, vespa.ai, which claims better performance&#x2F;scalability&#x2F;maintanability uses c++ for lucene layer and java for the solr&#x2F;elasticsearch layer.<p>There are blog posts speeding lucene by 2x+ by changing some stuff to c&#x2F;c++. There are libraries (trinity) claiming 2x+ performance .<p>There is google-engineer saying &quot;bigtable is 3x faster than hbase&quot; that I&#x27;ve read.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524905&amp;goto=item%3Fid%3D16523064%2316524905">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
      <tr class='athing comtr ' id='16525894'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16525894' href='vote?id=16525894&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=itronitron" class="hnuser">itronitron</a> <span class="age"><a href="item?id=16525894">10 hours ago</a></span> <span id="unv_16525894"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16525894)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">People with an interest may want to check out Azul&#x27;s Zing JVM and the following blog post testing it out with Lucene...
<a href="http:&#x2F;&#x2F;blog.mikemccandless.com&#x2F;2012&#x2F;07&#x2F;lucene-index-in-ram-with-azuls-zing-jvm.html" rel="nofollow">http:&#x2F;&#x2F;blog.mikemccandless.com&#x2F;2012&#x2F;07&#x2F;lucene-index-in-ram-w...</a><span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16525894&amp;goto=item%3Fid%3D16523064%2316525894">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16524775'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16524775' href='vote?id=16524775&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=jjirsa" class="hnuser">jjirsa</a> <span class="age"><a href="item?id=16524775">13 hours ago</a></span> <span id="unv_16524775"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16524775)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Cassandra does a bunch of stuff off-heap - we keep things like Bloom Filters, our compression offsets (to seek into compressed data files), and even some of the memtable (the in-memory buffer before flushing) in direct memory, primary for the reasons you describe.<p>We still have &quot;other&quot; things on-heap. The biggest contributor to GC pain tends to be the number of objects allocated on the read path, so this patch works around that by pushing much of that logic to rocksdb.<p>There are certainly other things you can do in the code itself that would also help - one of the biggest contributors to garbage is the column index. CASSANDRA-9754 fixes much of that (jira is inactive, but the development work on it is ongoing).<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524775&amp;goto=item%3Fid%3D16523064%2316524775">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
    <tr class='athing comtr ' id='16523666'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16523666' href='vote?id=16523666&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=wonnage" class="hnuser">wonnage</a> <span class="age"><a href="item?id=16523666">15 hours ago</a></span> <span id="unv_16523666"></span><span class="par"></span> <a class="togg" n="3" href="javascript:void(0)" onclick="return toggle(event, 16523666)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">The purpose of separating into young and old generation is that it&#x27;s easier to find dead objects in the young generation (as you said, average object lives for a short period of time). You only have to scan this subset for a minor GC. It doesn&#x27;t really matter how many long-lived objects you have as long as you can avoid needing to do a major GC.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523666&amp;goto=item%3Fid%3D16523064%2316523666">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16524036'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16524036' href='vote?id=16524036&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=openasocket" class="hnuser">openasocket</a> <span class="age"><a href="item?id=16524036">14 hours ago</a></span> <span id="unv_16524036"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16524036)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Don&#x27;t you still need to scan the old generation during minor GC, in case a field in one of the older objects was modified to point to an object in the young generation? Or are there optimizations you can use to quickly and efficiently find references from the older generation to the younger?<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524036&amp;goto=item%3Fid%3D16523064%2316524036">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16524162'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16524162' href='vote?id=16524162&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=bzbarsky" class="hnuser">bzbarsky</a> <span class="age"><a href="item?id=16524162">14 hours ago</a></span> <span id="unv_16524162"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16524162)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">&gt; in case a field in one of the older objects was modified to point to an object in the young generation?<p>This is typically handled by <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Write_barrier#In_Garbage_collection" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Write_barrier#In_Garbage_colle...</a><span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524162&amp;goto=item%3Fid%3D16523064%2316524162">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16526407'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16526407' href='vote?id=16526407&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=coredog64" class="hnuser">coredog64</a> <span class="age"><a href="item?id=16526407">8 hours ago</a></span> <span id="unv_16526407"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16526407)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">For a long time, the guidance was to install jemalloc and then use off-heap objects.  I can’t recall what it was, but that broke in the 3.0.x series and is unlikely to return.  The feature stream (3.1.x) allegedly can use jemalloc again, but we’ve been slow to adopt it so I can’t provide proof.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16526407&amp;goto=item%3Fid%3D16523064%2316526407">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
    <tr class='athing comtr ' id='16524353'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16524353' href='vote?id=16524353&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=StreamBright" class="hnuser">StreamBright</a> <span class="age"><a href="item?id=16524353">14 hours ago</a></span> <span id="unv_16524353"></span><span class="par"></span> <a class="togg" n="3" href="javascript:void(0)" onclick="return toggle(event, 16524353)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">If you want to keep data off heap you need to use sun.misc.Unsafe and allocate &#x2F; free by yourself. I guess it is called unsafe for a reason. With G1GC you can do magical things to reduce the GC overhead which I always recommend as the first step before trying off heap.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524353&amp;goto=item%3Fid%3D16523064%2316524353">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16524431'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16524431' href='vote?id=16524431&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=kodablah" class="hnuser">kodablah</a> <span class="age"><a href="item?id=16524431">13 hours ago</a></span> <span id="unv_16524431"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16524431)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">ByteBuffer.allocateDirect is another off-JVM-heap solution that&#x27;s not marked unsafe.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524431&amp;goto=item%3Fid%3D16523064%2316524431">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
    <tr class='athing comtr ' id='16524425'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16524425' href='vote?id=16524425&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=the8472" class="hnuser">the8472</a> <span class="age"><a href="item?id=16524425">13 hours ago</a></span> <span id="unv_16524425"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16524425)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">You don&#x27;t even have to go through Unsafe. ByteBuffer.allocateDirect() gives you a chunk of off-heap memory.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524425&amp;goto=item%3Fid%3D16523064%2316524425">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
                  <tr class='athing comtr ' id='16524080'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_16524080' href='vote?id=16524080&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=haglin" class="hnuser">haglin</a> <span class="age"><a href="item?id=16524080">14 hours ago</a></span> <span id="unv_16524080"></span><span class="par"></span> <a class="togg" n="4" href="javascript:void(0)" onclick="return toggle(event, 16524080)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">&quot;To reduce the GC impact from the storage engine, we considered different approaches and ultimately decided to develop a C++ storage engine to replace existing ones.&quot;<p>I wonder how the numbers would have looked with the new low latency GC for Hotspot (ZGC).
<a href="https:&#x2F;&#x2F;wiki.openjdk.java.net&#x2F;display&#x2F;zgc&#x2F;Main" rel="nofollow">https:&#x2F;&#x2F;wiki.openjdk.java.net&#x2F;display&#x2F;zgc&#x2F;Main</a><p>Early results from SPECjbb2015 are impressive. 
<a href="https:&#x2F;&#x2F;youtu.be&#x2F;tShc0dyFtgw?t=5m1s" rel="nofollow">https:&#x2F;&#x2F;youtu.be&#x2F;tShc0dyFtgw?t=5m1s</a><span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524080&amp;goto=item%3Fid%3D16523064%2316524080">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16527123'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16527123' href='vote?id=16527123&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=tibbetts" class="hnuser">tibbetts</a> <span class="age"><a href="item?id=16527123">5 hours ago</a></span> <span id="unv_16527123"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16527123)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Yes, also Azul Zing. Really anytime someone says they have a problem with GC and suggests spending a million dollars of engineer time building a new system, they should consider Zing first. It works and is a way more efficient way of spending money to fix GC latency problems.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16527123&amp;goto=item%3Fid%3D16523064%2316527123">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16527929'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16527929' href='vote?id=16527929&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=majidazimi" class="hnuser">majidazimi</a> <span class="age"><a href="item?id=16527929">1 hour ago</a></span> <span id="unv_16527929"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16527929)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Because GC related issues don&#x27;t undergo from &quot;problem&quot; state to &quot;solved&quot; state. It is just a never ending stream of issues, that the team need to resolve, specially in a database realm in which metrics are hugely workload dependent.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16527929&amp;goto=item%3Fid%3D16523064%2316527929">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
      <tr class='athing comtr ' id='16525900'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16525900' href='vote?id=16525900&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=itronitron" class="hnuser">itronitron</a> <span class="age"><a href="item?id=16525900">10 hours ago</a></span> <span id="unv_16525900"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16525900)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">yes, a comparison across multiple JVMs would be nice<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16525900&amp;goto=item%3Fid%3D16523064%2316525900">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
                <tr class='athing comtr ' id='16523160'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_16523160' href='vote?id=16523160&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=Thaxll" class="hnuser">Thaxll</a> <span class="age"><a href="item?id=16523160">16 hours ago</a></span> <span id="unv_16523160"></span><span class="par"></span> <a class="togg" n="41" href="javascript:void(0)" onclick="return toggle(event, 16523160)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Weird, did they try to use <a href="https:&#x2F;&#x2F;www.scylladb.com&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.scylladb.com&#x2F;</a>?<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523160&amp;goto=item%3Fid%3D16523064%2316523160">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523471'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16523471' href='vote?id=16523471&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=jjirsa" class="hnuser">jjirsa</a> <span class="age"><a href="item?id=16523471">16 hours ago</a></span> <span id="unv_16523471"></span><span class="par"></span> <a class="togg" n="4" href="javascript:void(0)" onclick="return toggle(event, 16523471)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Why throw away something proven to run at massive scale, that you understand and trust for something that&#x27;s new, has never been run at that scale, and you have no experience running? If you have a team of software engineers, and the latency problem is a software problem, fix the software problem.<p>When you already know Cassandra, and you already know RocksDB, and you already have an engineering team, it makes far more sense to combine the two things you know how to use at scale than to try to use some new thing NOBODY has run at scale.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523471&amp;goto=item%3Fid%3D16523064%2316523471">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16526964'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16526964' href='vote?id=16526964&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=welder" class="hnuser">welder</a> <span class="age"><a href="item?id=16526964">6 hours ago</a></span> <span id="unv_16526964"></span><span class="par"></span> <a class="togg" n="3" href="javascript:void(0)" onclick="return toggle(event, 16526964)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">&gt; some new thing NOBODY has run at scale<p>Outbrain uses ScyllaDB in production at scale across multiple data centers. Not sure if it&#x27;s Instagram scale, but still enough to prove it&#x27;s reliability and performance.<p><a href="https:&#x2F;&#x2F;www.outbrain.com&#x2F;techblog&#x2F;2016&#x2F;08&#x2F;scylladb-poc-not-so-live-blogging-third-update&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.outbrain.com&#x2F;techblog&#x2F;2016&#x2F;08&#x2F;scylladb-poc-not-s...</a><span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16526964&amp;goto=item%3Fid%3D16523064%2316526964">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16527172'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16527172' href='vote?id=16527172&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=jjirsa" class="hnuser">jjirsa</a> <span class="age"><a href="item?id=16527172">5 hours ago</a></span> <span id="unv_16527172"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16527172)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">7 hosts in that poc, that is not &quot;at scale&quot;<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16527172&amp;goto=item%3Fid%3D16523064%2316527172">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16528093'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="160"></td><td valign="top" class="votelinks"><center><a id='up_16528093' href='vote?id=16528093&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=manigandham" class="hnuser">manigandham</a> <span class="age"><a href="item?id=16528093">7 minutes ago</a></span> <span id="unv_16528093"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16528093)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Scylla can handle 10-100x the load of Cassandra on the same servers. Scale is more than just the number of hosts.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16528093&amp;goto=item%3Fid%3D16523064%2316528093">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
          <tr class='athing comtr ' id='16523242'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16523242' href='vote?id=16523242&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=en4bz" class="hnuser">en4bz</a> <span class="age"><a href="item?id=16523242">16 hours ago</a></span> <span id="unv_16523242"></span><span class="par"></span> <a class="togg" n="30" href="javascript:void(0)" onclick="return toggle(event, 16523242)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">I was going to say the same thing. It seems pretty clear at this point that Java is not a good programming language to build a database on if you care about strong 99% latency guarantees. The engineers in the article came to this conclusion and so did the Scylla people years ago.<p>Scylla is AGPL for the OSS version though so testing it out would not be an option without getting a commercial license first.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523242&amp;goto=item%3Fid%3D16523064%2316523242">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523646'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16523646' href='vote?id=16523646&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=ghshephard" class="hnuser">ghshephard</a> <span class="age"><a href="item?id=16523646">15 hours ago</a></span> <span id="unv_16523646"></span><span class="par"></span> <a class="togg" n="10" href="javascript:void(0)" onclick="return toggle(event, 16523646)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">There are those who&#x27;ve deployed on Java with tight latency requirements:
<a href="https:&#x2F;&#x2F;martinfowler.com&#x2F;articles&#x2F;lmax.html?t=1319912579" rel="nofollow">https:&#x2F;&#x2F;martinfowler.com&#x2F;articles&#x2F;lmax.html?t=1319912579</a> - Benchmarked at around 6 million transactions&#x2F;second.<p>The issue isn&#x27;t so much Java the language, as it is being aware of the GC, and developing with it in mind.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523646&amp;goto=item%3Fid%3D16523064%2316523646">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523745'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16523745' href='vote?id=16523745&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=en4bz" class="hnuser">en4bz</a> <span class="age"><a href="item?id=16523745">15 hours ago</a></span> <span id="unv_16523745"></span><span class="par"></span> <a class="togg" n="9" href="javascript:void(0)" onclick="return toggle(event, 16523745)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">That removes the value proposition of Java though which is that you don&#x27;t need to worry about memory management. If you need to mentally track every implicit allocation and deallocation in Java then you are essentially writing code in a kneecapped version of C++.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523745&amp;goto=item%3Fid%3D16523064%2316523745">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523824'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="160"></td><td valign="top" class="votelinks"><center><a id='up_16523824' href='vote?id=16523824&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=amarkov" class="hnuser">amarkov</a> <span class="age"><a href="item?id=16523824">15 hours ago</a></span> <span id="unv_16523824"></span><span class="par"></span> <a class="togg" n="3" href="javascript:void(0)" onclick="return toggle(event, 16523824)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Even in a database, most of the code isn&#x27;t performance sensitive. Making your life a bit harder in the fast path so it&#x27;s easier in the slow path is at least a tradeoff worth considering.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523824&amp;goto=item%3Fid%3D16523064%2316523824">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16524228'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="200"></td><td valign="top" class="votelinks"><center><a id='up_16524228' href='vote?id=16524228&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=kllrnohj" class="hnuser">kllrnohj</a> <span class="age"><a href="item?id=16524228">14 hours ago</a></span> <span id="unv_16524228"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16524228)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Your fast path is still crippled by your slow paths&#x27; mess. It doesn&#x27;t matter if you&#x27;ve isolated and optimized those paths in isolation, to the GC there&#x27;s just Your Process and it&#x27;s going to suspend Your Process whenever it wants for however long it needs regardless of what&#x27;s currently happening.<p>So if you&#x27;re latency sensitive then <i>all</i> of your code needs to be aggressive at avoiding object creation. <i>All</i> of your code becomes part of &quot;the fast path&quot;, even if it&#x27;s in a different thread.<p>Or you isolate your fast path in a different process or a non-GC&#x27;d runtime, the later being the approach taken here by Instagram.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524228&amp;goto=item%3Fid%3D16523064%2316524228">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
    <tr class='athing comtr ' id='16527876'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="200"></td><td valign="top" class="votelinks"><center><a id='up_16527876' href='vote?id=16527876&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=majidazimi" class="hnuser">majidazimi</a> <span class="age"><a href="item?id=16527876">1 hour ago</a></span> <span id="unv_16527876"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16527876)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Based on previous research [1], almost every part of a DB is in the hot path.<p>[1] <a href="http:&#x2F;&#x2F;15721.courses.cs.cmu.edu&#x2F;spring2018&#x2F;papers&#x2F;02-inmemory&#x2F;hstore-lookingglass.pdf" rel="nofollow">http:&#x2F;&#x2F;15721.courses.cs.cmu.edu&#x2F;spring2018&#x2F;papers&#x2F;02-inmemor...</a><span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16527876&amp;goto=item%3Fid%3D16523064%2316527876">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
      <tr class='athing comtr ' id='16525880'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="160"></td><td valign="top" class="votelinks"><center><a id='up_16525880' href='vote?id=16525880&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=itronitron" class="hnuser">itronitron</a> <span class="age"><a href="item?id=16525880">10 hours ago</a></span> <span id="unv_16525880"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16525880)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">developing in Java with awareness of the GC doesn&#x27;t mean tracking allocation and deallocation of memory, it means developers should avoid allocating lots of new Objects when possible. In practice this means creating view, cursor, or offset type Objects that map to arrays of more primitive data types.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16525880&amp;goto=item%3Fid%3D16523064%2316525880">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16527134'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="200"></td><td valign="top" class="votelinks"><center><a id='up_16527134' href='vote?id=16527134&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=tibbetts" class="hnuser">tibbetts</a> <span class="age"><a href="item?id=16527134">5 hours ago</a></span> <span id="unv_16527134"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16527134)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Exactly. Developing GC aware code is still easier and safer than c++ memory management. Particularly because when you screw up in c++ you get crashes or data loss, and when you screw up in Java you mostly just get GC pauses.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16527134&amp;goto=item%3Fid%3D16523064%2316527134">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
      <tr class='athing comtr ' id='16523793'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="160"></td><td valign="top" class="votelinks"><center><a id='up_16523793' href='vote?id=16523793&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=mschuster91" class="hnuser">mschuster91</a> <span class="age"><a href="item?id=16523793">15 hours ago</a></span> <span id="unv_16523793"></span><span class="par"></span> <a class="togg" n="3" href="javascript:void(0)" onclick="return toggle(event, 16523793)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">&gt; If you need to mentally track every implicit allocation and deallocation in Java then you are essentially writing code in a kneecapped version of C++.<p>Well, Java has the advantage of being platform (and to a certain degree, runtime) independent, plus a robust set of best practices and ecosystem when it comes to modules and library handling, which is pretty hard to get done right for C&#x2F;C++ projects.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523793&amp;goto=item%3Fid%3D16523064%2316523793">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16527800'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="200"></td><td valign="top" class="votelinks"><center><a id='up_16527800' href='vote?id=16527800&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=majidazimi" class="hnuser">majidazimi</a> <span class="age"><a href="item?id=16527800">1 hour ago</a></span> <span id="unv_16527800"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16527800)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">&gt; Well, Java has the advantage of being platform (and to a certain degree, runtime) independent<p>What is the benefit of that? Who on earth runs a DB written in Java on windows? Any useful server software will end up using platform native features, be it SQL server, MySQL, HBase, ...<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16527800&amp;goto=item%3Fid%3D16523064%2316527800">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
    <tr class='athing comtr ' id='16523852'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="200"></td><td valign="top" class="votelinks"><center><a id='up_16523852' href='vote?id=16523852&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=en4bz" class="hnuser">en4bz</a> <span class="age"><a href="item?id=16523852">15 hours ago</a></span> <span id="unv_16523852"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16523852)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Node.js is also platform independent and has a package manager but I wouldn&#x27;t use it for a High Performance &#x2F; Low Latency application like a database.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523852&amp;goto=item%3Fid%3D16523064%2316523852">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
          <tr class='athing comtr ' id='16523911'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16523911' href='vote?id=16523911&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=geofft" class="hnuser">geofft</a> <span class="age"><a href="item?id=16523911">15 hours ago</a></span> <span id="unv_16523911"></span><span class="par"></span> <a class="togg" n="5" href="javascript:void(0)" onclick="return toggle(event, 16523911)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">&gt; <i>Scylla is AGPL for the OSS version though so testing it out would not be an option without getting a commercial license first.</i><p>Huh? The AGPL is not a non-commercial-use-only license.<p>If you have proprietary software that you would like to <i>combine with</i> AGPL code (i.e., not interact with as a service) and is available to the general public over the Internet, and you want keep your code proprietary, sure, you may not want to use the AGPL. But you could say the same thing about proprietary software you want to combine with GPL code and sell to the general public.<p>If you&#x27;re either using the software through it&#x27;s existing defined public interfaces, or you&#x27;re okay releasing anything you modify or link into the software, the AGPL (and the GPL) are fine. Lots of people distribute proprietary products that include GPL code, like Chromebooks, Android phones, routers, GitHub Enterprise, etc. We figured out years ago that the Linux kernel is not just a non-commercial product. Why are we having the same misconceptions about the AGPL?<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523911&amp;goto=item%3Fid%3D16523064%2316523911">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16524268'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16524268' href='vote?id=16524268&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=kevindong" class="hnuser">kevindong</a> <span class="age"><a href="item?id=16524268">14 hours ago</a></span> <span id="unv_16524268"></span><span class="par"></span> <a class="togg" n="3" href="javascript:void(0)" onclick="return toggle(event, 16524268)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">The exact interpretation varies from company to company. Some companies take the strict stance of &quot;if you use this library in any way in your application, you must open source your entire application.&quot; I&#x27;ve found that some libraries explicitly state that requirement within their FAQs for their community&#x2F;free edition as opposed to their commercially (and paid) licensed equivalent.<p>At the end of the day, it&#x27;s not worth risking yourself (or your company) when the owners of the library claims a software license works a certain way and you disagree. Sure you might be right and you might even prevail in court, but the potential legal fees usually aren&#x27;t worth the trouble.<p>I ran into this issue when I was selecting a library to generate PDFs for my internship over the summer: <a href="https:&#x2F;&#x2F;itextpdf.com&#x2F;AGPL" rel="nofollow">https:&#x2F;&#x2F;itextpdf.com&#x2F;AGPL</a><span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524268&amp;goto=item%3Fid%3D16523064%2316524268">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16525779'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="160"></td><td valign="top" class="votelinks"><center><a id='up_16525779' href='vote?id=16525779&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=nemothekid" class="hnuser">nemothekid</a> <span class="age"><a href="item?id=16525779">11 hours ago</a></span> <span id="unv_16525779"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16525779)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">FWIW, I’m pretty sure Facebook also uses mongodb heavily (or at least through its acquisition of parse) I don’t know if they have a commercial license or not, but they aren’t strangers to the AGPL<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16525779&amp;goto=item%3Fid%3D16523064%2316525779">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16526154'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="200"></td><td valign="top" class="votelinks"><center><a id='up_16526154' href='vote?id=16526154&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=snuxoll" class="hnuser">snuxoll</a> <span class="age"><a href="item?id=16526154">9 hours ago</a></span> <span id="unv_16526154"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16526154)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">MongoDB also makes their interpretation of the AGPL pretty well known - unfortunately it’s at odds with established interpretation of the normal GPL.<p>Requiring GPL&#x2F;AGPL software as a dependency even if you don’t link to it, but instead talk to it over the network does not mean you haven’t developed a derivative work in terms of the letter and spirit of the license. This is in-part why I steer 100% clear of MongoDB, there’s nothing stopping them from changing their view on the license and deciding to pursue legal action against people who use it in non-AGPL compatible manners down the road.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16526154&amp;goto=item%3Fid%3D16523064%2316526154">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16524016'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16524016' href='vote?id=16524016&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=en4bz" class="hnuser">en4bz</a> <span class="age"><a href="item?id=16524016">14 hours ago</a></span> <span id="unv_16524016"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16524016)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c88">I think you answered the question yourself [1].<p>The wording is ambiguous and as far as I know there have been no court cases yet that have yet to define what constitutes a connection between the end user and whether transitive connections count. If it&#x27;s ambiguous to a software developer then corporate lawyers are definitely going to say no.<p>[1] <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=16523858" rel="nofollow">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=16523858</a><p>EDIT: I realize that AGPL is valid for commercial use but since its terms are so onerous, especially once the lawyers get involved, it effectively makes the AGPL unusable in a larger corporation.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524016&amp;goto=item%3Fid%3D16523064%2316524016">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
      <tr class='athing comtr ' id='16523299'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16523299' href='vote?id=16523299&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=glommer" class="hnuser">glommer</a> <span class="age"><a href="item?id=16523299">16 hours ago</a></span> <span id="unv_16523299"></span><span class="par"></span> <a class="togg" n="6" href="javascript:void(0)" onclick="return toggle(event, 16523299)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">(ScyllaDB employee here)<p>I don&#x27;t believe one would need a commercial license just to <i>test</i> a product in any way? They are not making that part of any product at that point, so no concerns here.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523299&amp;goto=item%3Fid%3D16523064%2316523299">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523314'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16523314' href='vote?id=16523314&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=snovv_crash" class="hnuser">snovv_crash</a> <span class="age"><a href="item?id=16523314">16 hours ago</a></span> <span id="unv_16523314"></span><span class="par"></span> <a class="togg" n="5" href="javascript:void(0)" onclick="return toggle(event, 16523314)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">They can&#x27;t test on production servers.<p>Fake data, non-userfacing servers, sure.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523314&amp;goto=item%3Fid%3D16523064%2316523314">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523362'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="160"></td><td valign="top" class="votelinks"><center><a id='up_16523362' href='vote?id=16523362&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=glommer" class="hnuser">glommer</a> <span class="age"><a href="item?id=16523362">16 hours ago</a></span> <span id="unv_16523362"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16523362)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Even if that is a problem, we provide anyone that is interested with a 30-day evaluation license of Scylla Enterprise.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523362&amp;goto=item%3Fid%3D16523064%2316523362">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523489'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="200"></td><td valign="top" class="votelinks"><center><a id='up_16523489' href='vote?id=16523489&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=Sir_Substance" class="hnuser">Sir_Substance</a> <span class="age"><a href="item?id=16523489">15 hours ago</a></span> <span id="unv_16523489"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16523489)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">That puts you about 2&#x2F;3rds of the way down the list of things to try. You&#x27;re before all the products that have no evaluation license at all, but after all the open source options that developers can test at their leisure.<p>If I&#x27;m trying a products evaluation license, you can be sure I&#x27;ve tried literally every other option under the sun first, including investigating the possibility rolling my own if situationally appropriate. No form of development is slower than the kind where I have to wait for a company in another timezone to give me permission to use their software, so it&#x27;s always last on my options list unless the company has frankly amazing reviews that pique my curiosity.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523489&amp;goto=item%3Fid%3D16523064%2316523489">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
      <tr class='athing comtr ' id='16523858'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="160"></td><td valign="top" class="votelinks"><center><a id='up_16523858' href='vote?id=16523858&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=geofft" class="hnuser">geofft</a> <span class="age"><a href="item?id=16523858">15 hours ago</a></span> <span id="unv_16523858"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16523858)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Instagram doesn&#x27;t operate any user-facing Cassandra servers, though. They run user-facing web servers that talk to Cassandra internally.<p>I don&#x27;t like the AGPL because it&#x27;s unclear on this exact sort of thing, but it does seem to me like the obvious reading of &quot;all users interacting with it remotely through a computer network&quot; does not encompass the connection between Instagram end users and their internal Cassandra.<p>And, in any case, they released sources for the thing they came up with - which is all that the AGPL requires. If they&#x27;re okay with doing that, they can definitely use the AGPL for production commercial software.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523858&amp;goto=item%3Fid%3D16523064%2316523858">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16524045'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="200"></td><td valign="top" class="votelinks"><center><a id='up_16524045' href='vote?id=16524045&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=en4bz" class="hnuser">en4bz</a> <span class="age"><a href="item?id=16524045">14 hours ago</a></span> <span id="unv_16524045"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16524045)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Counldn&#x27;t sticking a proxy in front of any AGPL software defeat its purpose then? If you don&#x27;t consider transitive connections it seems pointless to me.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524045&amp;goto=item%3Fid%3D16523064%2316524045">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
          <tr class='athing comtr ' id='16523550'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16523550' href='vote?id=16523550&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=gnud" class="hnuser">gnud</a> <span class="age"><a href="item?id=16523550">15 hours ago</a></span> <span id="unv_16523550"></span><span class="par"></span> <a class="togg" n="4" href="javascript:void(0)" onclick="return toggle(event, 16523550)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">The server is AGPL. The client is Apache licensed.
So I don&#x27;t see a problem with using the AGPL version in commercial product.<p>Noone claims that a product using the MySql driver is a derivative work of the MySql server?<p>Edit: Of course, IANAL...<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523550&amp;goto=item%3Fid%3D16523064%2316523550">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16524889'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16524889' href='vote?id=16524889&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=lukev" class="hnuser">lukev</a> <span class="age"><a href="item?id=16524889">13 hours ago</a></span> <span id="unv_16524889"></span><span class="par"></span> <a class="togg" n="3" href="javascript:void(0)" onclick="return toggle(event, 16524889)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c5a">That&#x27;s specifically what the AGPL does (as opposed to the GPL.) The copyleft &quot;infection&quot; is deliberately transmitted via network clients, not just static linking.<p>So you actually <i>can&#x27;t</i> release a permissively licensed client for an AGPL server. I mean, they did, clearly, but the AGPL itself would seem to make that inconsistent.<p>But then none of this has ever been litigated and both the AGPL and GPL themselves are very confusingly worded so <i>shrug</i>.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524889&amp;goto=item%3Fid%3D16523064%2316524889">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16525072'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="160"></td><td valign="top" class="votelinks"><center><a id='up_16525072' href='vote?id=16525072&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=gnud" class="hnuser">gnud</a> <span class="age"><a href="item?id=16525072">12 hours ago</a></span> <span id="unv_16525072"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16525072)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">As I understand it, with the GPL, you must offer source code under the GPL to everyone you distribute the software to.
With the AGPL, the same goes for those that use the software over the network.<p>So you must offer the source of the database everyone who connects to the database over the network, under the AGPL.
But if you deliver a web app, not a database-as-a-service, your users don&#x27;t connect to the database. And since this database uses the Cassandra protocol, I&#x27;d say your web app isn&#x27;t a derived work of the database in any way.<p>Of course, that last part is the sticky bit.
But if applications using database servers via a well defined protocol are judged to be derived works, we might have other problems - hence the reference to MySql in my first post.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16525072&amp;goto=item%3Fid%3D16523064%2316525072">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16526210'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="200"></td><td valign="top" class="votelinks"><center><a id='up_16526210' href='vote?id=16526210&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=snuxoll" class="hnuser">snuxoll</a> <span class="age"><a href="item?id=16526210">9 hours ago</a></span> <span id="unv_16526210"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16526210)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Requiring GPL’d software to function means your product is a derivative work, full stop as far as the spirit and letter of the license is concerned. Using it over a network instead of linking against it doesn’t change this, if you depend on MySQL or any of the forks and distribute your software it must be made available under a GPL-compatible license. The requirements of the AGPL become clear in this regard as well; network use is distribution with the AGPL - incorporating AGPL’d software into your application means you must consider your entire application as licensed under the AGPL or compatible license.<p>MongoDB muddied the waters here by deciding to interpret the AGPL differently, but I wouldn’t risk your business on it.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16526210&amp;goto=item%3Fid%3D16523064%2316526210">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
          <tr class='athing comtr ' id='16523278'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16523278' href='vote?id=16523278&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=HippoBaro" class="hnuser">HippoBaro</a> <span class="age"><a href="item?id=16523278">16 hours ago</a></span> <span id="unv_16523278"></span><span class="par"></span> <a class="togg" n="4" href="javascript:void(0)" onclick="return toggle(event, 16523278)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Doesn&#x27;t AGPL allow commercial use?<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523278&amp;goto=item%3Fid%3D16523064%2316523278">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523307'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16523307' href='vote?id=16523307&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=halestock" class="hnuser">halestock</a> <span class="age"><a href="item?id=16523307">16 hours ago</a></span> <span id="unv_16523307"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16523307)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Per the AGPL preamble[0]:<p>&quot;The GNU General Public License permits making a modified version and letting the public access it on a server without ever releasing its source code to the public.<p>The GNU Affero General Public License is designed specifically to ensure that, in such cases, the modified source code becomes available to the community. It requires the operator of a network server to provide the source code of the modified version running there to the users of that server. Therefore, public use of a modified version, on a publicly accessible server, gives the public access to the source code of the modified version.&quot;<p>[0] <a href="https:&#x2F;&#x2F;www.gnu.org&#x2F;licenses&#x2F;agpl-3.0#preamble" rel="nofollow">https:&#x2F;&#x2F;www.gnu.org&#x2F;licenses&#x2F;agpl-3.0#preamble</a><span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523307&amp;goto=item%3Fid%3D16523064%2316523307">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
    <tr class='athing comtr ' id='16523487'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16523487' href='vote?id=16523487&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=adrianN" class="hnuser">adrianN</a> <span class="age"><a href="item?id=16523487">15 hours ago</a></span> <span id="unv_16523487"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16523487)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Yes it does, but AGPL licenced software is super banned at all major companies because it is very viral. You have to make derivative software available under AGPL even if the end user accesses it only over a network.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523487&amp;goto=item%3Fid%3D16523064%2316523487">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
    <tr class='athing comtr ' id='16523308'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16523308' href='vote?id=16523308&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=glommer" class="hnuser">glommer</a> <span class="age"><a href="item?id=16523308">16 hours ago</a></span> <span id="unv_16523308"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16523308)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">It does, but there are conditions that apply. Some companies don&#x27;t like going that route - which in my opinion is not a thing, but I can&#x27;t understand the concern.<p>But for testing, I don&#x27;t see any impediment.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523308&amp;goto=item%3Fid%3D16523064%2316523308">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523372'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16523372' href='vote?id=16523372&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=jakelarkin" class="hnuser">jakelarkin</a> <span class="age"><a href="item?id=16523372">16 hours ago</a></span> <span id="unv_16523372"></span><span class="par"></span> <a class="togg" n="5" href="javascript:void(0)" onclick="return toggle(event, 16523372)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">- has anyone run it FB scale? for how long?<p>- how many experienced scylladb devops are there globally that we can hire?<p>Those questions asked at BigTechCo before it adopts somebody elses tech.<p>FB already operates RocksDb and Cassandra so there&#x27;s way less technical, career, financial risk  for just hacking the two together with some aggressive refactoring.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523372&amp;goto=item%3Fid%3D16523064%2316523372">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523438'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16523438' href='vote?id=16523438&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=polskibus" class="hnuser">polskibus</a> <span class="age"><a href="item?id=16523438">16 hours ago</a></span> <span id="unv_16523438"></span><span class="par"></span> <a class="togg" n="4" href="javascript:void(0)" onclick="return toggle(event, 16523438)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c73">Does FB still use Cassandra? I thought they abandoned them ages ago and then databricks picked it up?<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523438&amp;goto=item%3Fid%3D16523064%2316523438">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523592'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16523592' href='vote?id=16523592&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=jjirsa" class="hnuser">jjirsa</a> <span class="age"><a href="item?id=16523592">15 hours ago</a></span> <span id="unv_16523592"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16523592)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">The article is literally written by Instagram, which is FB.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523592&amp;goto=item%3Fid%3D16523064%2316523592">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16524140'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="160"></td><td valign="top" class="votelinks"><center><a id='up_16524140' href='vote?id=16524140&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=sciurus" class="hnuser">sciurus</a> <span class="age"><a href="item?id=16524140">14 hours ago</a></span> <span id="unv_16524140"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16524140)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Well, it&#x27;s a separate product that Facebook acquired. True or not, it&#x27;s a common perception that Facebook abandoned Cassandra.<p><a href="https:&#x2F;&#x2F;www.wired.com&#x2F;2014&#x2F;08&#x2F;datastax&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.wired.com&#x2F;2014&#x2F;08&#x2F;datastax&#x2F;</a><span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524140&amp;goto=item%3Fid%3D16523064%2316524140">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
      <tr class='athing comtr ' id='16523562'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16523562' href='vote?id=16523562&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=wenc" class="hnuser">wenc</a> <span class="age"><a href="item?id=16523562">15 hours ago</a></span> <span id="unv_16523562"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16523562)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">&gt; then databricks picked it up<p>I think it&#x27;s DataStax. Databricks is the company behind Spark.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523562&amp;goto=item%3Fid%3D16523064%2316523562">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523215'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16523215' href='vote?id=16523215&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=HippoBaro" class="hnuser">HippoBaro</a> <span class="age"><a href="item?id=16523215">16 hours ago</a></span> <span id="unv_16523215"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16523215)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">My thought exactly. Would be interesting to know if they did and if yes, why they chose to develop something in-house anyway.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523215&amp;goto=item%3Fid%3D16523064%2316523215">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
                <tr class='athing comtr ' id='16524491'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_16524491' href='vote?id=16524491&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=tschellenbach" class="hnuser">tschellenbach</a> <span class="age"><a href="item?id=16524491">13 hours ago</a></span> <span id="unv_16524491"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16524491)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">For Stream&#x27;s feed tech we also moved from Cassandra to an in-house solution on top of RocksDB. It&#x27;s been a massive performance and maintenance improvement. This StackShare explains how Stream&#x27;s stack works. It&#x27;s based on Go, RocksDB and Raft: <a href="https:&#x2F;&#x2F;stackshare.io&#x2F;stream&#x2F;stream-and-go-news-feeds-for-over-300-million-end-users" rel="nofollow">https:&#x2F;&#x2F;stackshare.io&#x2F;stream&#x2F;stream-and-go-news-feeds-for-ov...</a><span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524491&amp;goto=item%3Fid%3D16523064%2316524491">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
              <tr class='athing comtr ' id='16523565'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_16523565' href='vote?id=16523565&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=StreamBright" class="hnuser">StreamBright</a> <span class="age"><a href="item?id=16523565">15 hours ago</a></span> <span id="unv_16523565"></span><span class="par"></span> <a class="togg" n="5" href="javascript:void(0)" onclick="return toggle(event, 16523565)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">In a similar situation we just adjust  the GC and started to use G1GC which resulted in similar numbers.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523565&amp;goto=item%3Fid%3D16523064%2316523565">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523650'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16523650' href='vote?id=16523650&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=coryfoo" class="hnuser">coryfoo</a> <span class="age"><a href="item?id=16523650">15 hours ago</a></span> <span id="unv_16523650"></span><span class="par"></span> <a class="togg" n="4" href="javascript:void(0)" onclick="return toggle(event, 16523650)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">I bet that didn&#x27;t take N engineers 12 months to build out, either<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523650&amp;goto=item%3Fid%3D16523064%2316523650">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16525272'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16525272' href='vote?id=16525272&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=threeseed" class="hnuser">threeseed</a> <span class="age"><a href="item?id=16525272">12 hours ago</a></span> <span id="unv_16525272"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16525272)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Cassandra uses G1GC by default.<p>If it was as simple as tweaking a few GC settings to get 10x improvement pretty sure Datastax would&#x27;ve done it by now.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16525272&amp;goto=item%3Fid%3D16523064%2316525272">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16527189'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16527189' href='vote?id=16527189&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=jjirsa" class="hnuser">jjirsa</a> <span class="age"><a href="item?id=16527189">5 hours ago</a></span> <span id="unv_16527189"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16527189)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">The problem with making a general purpose DB is you have to have general purpose defaults. The Cassandra defaults are &quot;dont crash anywhere&quot;, not &quot;be super fast and low latency&quot;. You can definitely do 5x better than the default with some basic jvm tuning.<p>That said: the IG folks certainly know how to tune JVMs. There are IG (and former IG, I saw rbranson post) folks in this thread that know how to tune the collectors, so assume that the 10x they see is beyond what you&#x27;d get from simple tuning.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16527189&amp;goto=item%3Fid%3D16523064%2316527189">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
      <tr class='athing comtr ' id='16524304'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16524304' href='vote?id=16524304&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=StreamBright" class="hnuser">StreamBright</a> <span class="age"><a href="item?id=16524304">14 hours ago</a></span> <span id="unv_16524304"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16524304)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">2 engineers, 2 weeks because we had to evaluate every change we made with production traffic.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524304&amp;goto=item%3Fid%3D16523064%2316524304">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
                  <tr class='athing comtr ' id='16523477'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_16523477' href='vote?id=16523477&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=fdeliege" class="hnuser">fdeliege</a> <span class="age"><a href="item?id=16523477">15 hours ago</a></span> <span id="unv_16523477"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16523477)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Join our meetup to chat with some of the developers:  <a href="https:&#x2F;&#x2F;www.meetup.com&#x2F;Apache-Cassandra-Bay-Area&#x2F;events&#x2F;248376266&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.meetup.com&#x2F;Apache-Cassandra-Bay-Area&#x2F;events&#x2F;2483...</a><span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523477&amp;goto=item%3Fid%3D16523064%2316523477">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523902'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16523902' href='vote?id=16523902&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=jjirsa" class="hnuser">jjirsa</a> <span class="age"><a href="item?id=16523902">15 hours ago</a></span> <span id="unv_16523902"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16523902)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">So sad I’m not in town that week<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523902&amp;goto=item%3Fid%3D16523064%2316523902">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
                <tr class='athing comtr ' id='16523782'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_16523782' href='vote?id=16523782&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=3uclid" class="hnuser">3uclid</a> <span class="age"><a href="item?id=16523782">15 hours ago</a></span> <span id="unv_16523782"></span><span class="par"></span> <a class="togg" n="6" href="javascript:void(0)" onclick="return toggle(event, 16523782)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Unrelated: as a CS undergrad, I read this article and was immediately inspired. This is definitely the type of work I want to be doing when I graduate (infrastructure engineering). But my next thought was: where do I start?!<p>Any advice?<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523782&amp;goto=item%3Fid%3D16523064%2316523782">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523823'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16523823' href='vote?id=16523823&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=en4bz" class="hnuser">en4bz</a> <span class="age"><a href="item?id=16523823">15 hours ago</a></span> <span id="unv_16523823"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16523823)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">CMU Database Group Lectures: <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCHnBsf2rH-K7pn09rb3qvkA" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCHnBsf2rH-K7pn09rb3qvkA</a><span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523823&amp;goto=item%3Fid%3D16523064%2316523823">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
    <tr class='athing comtr ' id='16525124'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16525124' href='vote?id=16525124&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=ddorian43" class="hnuser">ddorian43</a> <span class="age"><a href="item?id=16525124">12 hours ago</a></span> <span id="unv_16525124"></span><span class="par"></span> <a class="togg" n="3" href="javascript:void(0)" onclick="return toggle(event, 16525124)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Still in school ? (don&#x27;t understand different &lt;type&gt;grad).
See: GSOC Seastar Framework <a href="https:&#x2F;&#x2F;summerofcode.withgoogle.com&#x2F;organizations&#x2F;6190282903650304&#x2F;" rel="nofollow">https:&#x2F;&#x2F;summerofcode.withgoogle.com&#x2F;organizations&#x2F;6190282903...</a><span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16525124&amp;goto=item%3Fid%3D16523064%2316525124">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16525551'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16525551' href='vote?id=16525551&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=3uclid" class="hnuser">3uclid</a> <span class="age"><a href="item?id=16525551">11 hours ago</a></span> <span id="unv_16525551"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16525551)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Yeah, still in school (3rd year). I have intern experience, but it seems like these type of positions are way too advanced for me at the moment. Just unsure how to progress...<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16525551&amp;goto=item%3Fid%3D16523064%2316525551">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16527885'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16527885' href='vote?id=16527885&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=ddorian43" class="hnuser">ddorian43</a> <span class="age"><a href="item?id=16527885">1 hour ago</a></span> <span id="unv_16527885"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16527885)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">1. see the other comment for CMU
2. learn c++ + data structures
3. try seastar (or any other lib?) and try to follow the tutorial
4. go to mailing list and ask for help when you&#x27;re stuck
5. look into issue-queue for small tasks and grow little by little<p>Makes sense ? Another project you may look at is <a href="https:&#x2F;&#x2F;github.com&#x2F;phaistos-networks&#x2F;Trinity" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;phaistos-networks&#x2F;Trinity</a> which is a library and should be simpler than a whole framework&#x2F;db (trinity is like lucene&#x2F;rocksdb compared to full-db cassandra&#x2F;scylladb).<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16527885&amp;goto=item%3Fid%3D16523064%2316527885">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523920'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16523920' href='vote?id=16523920&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=jjirsa" class="hnuser">jjirsa</a> <span class="age"><a href="item?id=16523920">15 hours ago</a></span> <span id="unv_16523920"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16523920)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Happy to help you get started working on Cassandra. <a href="http:&#x2F;&#x2F;cassandra.apache.org&#x2F;doc&#x2F;latest&#x2F;development&#x2F;patches.html" rel="nofollow">http:&#x2F;&#x2F;cassandra.apache.org&#x2F;doc&#x2F;latest&#x2F;development&#x2F;patches.h...</a> Has some basic entry pointers. There’s also a dev mailing list that’s reasonable active.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523920&amp;goto=item%3Fid%3D16523064%2316523920">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
                <tr class='athing comtr ' id='16524071'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_16524071' href='vote?id=16524071&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=adrianratnapala" class="hnuser">adrianratnapala</a> <span class="age"><a href="item?id=16524071">14 hours ago</a></span> <span id="unv_16524071"></span><span class="par"></span> <a class="togg" n="3" href="javascript:void(0)" onclick="return toggle(event, 16524071)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">As a Java scoffer trying to be fair-minded, I resisted the urge to joke that &quot;it&#x27;s was the GC, stupid&quot; and assume that a big project like Cassandra had somehow worked around the GC latency problems.<p>But, what?  It turns out the article is really about replacing Java with C++.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524071&amp;goto=item%3Fid%3D16523064%2316524071">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16524337'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16524337' href='vote?id=16524337&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=cestith" class="hnuser">cestith</a> <span class="age"><a href="item?id=16524337">14 hours ago</a></span> <span id="unv_16524337"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16524337)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">It&#x27;s about using something in one language for its features and only porting the critical sections to C++ via a clean API. This is the sort of advice we&#x27;ve been giving people for decades. Choose the language for what you want to build, measure and profile performance if necessary, find the bottleneck on the hot path, decouple that from the bulk of the code, and reach to a lower level for performance only in that clearly defined section.<p>They managed to generalize one application that meets their feature needs to be a front end to another existing application with fewer features but better performance as a back end. They&#x27;re optimizing their hot path by decoupling it from the rest of the application and handing off to C++ code they didn&#x27;t even have to write. Adding pluggable storage engines to Cassandra means that if they make the API smooth enough they can have engines in C, C++, Erlang, Go, Rust, ML, or whatever in the future without changing their front end. That&#x27;s a big win even beyond this tail latency issue.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524337&amp;goto=item%3Fid%3D16523064%2316524337">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16527842'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16527842' href='vote?id=16527842&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=majidazimi" class="hnuser">majidazimi</a> <span class="age"><a href="item?id=16527842">1 hour ago</a></span> <span id="unv_16527842"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16527842)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Well, other than storage engine, the next big part of a database software is the query planner&#x2F;optimizer which Cassandra doesn&#x27;t have (due to simple KV nature of it). So there isn&#x27;t much remaining. In a long term plan, rewrite them all and you have single code base and you&#x27;ll benefit from mighty C++ in other components of the database. And there is still room for more optimizations: SIMD, ...<p>The GC problem is not limited to C*. This shit(virtual machine) is hitting the whole Hadoop stack: HDFS, Hive, Spark, Flink, Pig...<p>Immense number of tickets in any fairly large cluster is related somewhat to GC and JVM behavior.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16527842&amp;goto=item%3Fid%3D16523064%2316527842">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
                  <tr class='athing comtr ' id='16523540'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_16523540' href='vote?id=16523540&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=en4bz" class="hnuser">en4bz</a> <span class="age"><a href="item?id=16523540">15 hours ago</a></span> <span id="unv_16523540"></span><span class="par"></span> <a class="togg" n="6" href="javascript:void(0)" onclick="return toggle(event, 16523540)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Has any tried running Casandra on Azul Zing[1]? The slowdown here is not surprisingly related to GC pauses which Azul has eliminated in Zing.<p>[1] <a href="https:&#x2F;&#x2F;www.azul.com&#x2F;products&#x2F;zing&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.azul.com&#x2F;products&#x2F;zing&#x2F;</a><span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523540&amp;goto=item%3Fid%3D16523064%2316523540">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523566'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16523566' href='vote?id=16523566&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=rbranson" class="hnuser">rbranson</a> <span class="age"><a href="item?id=16523566">15 hours ago</a></span> <span id="unv_16523566"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16523566)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">The licensing cost of Zing generally makes this a bad trade-off. It&#x27;s much cheaper to purchase more hardware. Zing is targeted at vertically scaling very large JVM heaps, where it&#x27;s valuable to have massive amounts of data on a single, big machine.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523566&amp;goto=item%3Fid%3D16523064%2316523566">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16527349'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16527349' href='vote?id=16527349&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=nitsanw" class="hnuser">nitsanw</a> <span class="age"><a href="item?id=16527349">4 hours ago</a></span> <span id="unv_16527349"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16527349)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">As an ex-Azul employee I can say there&#x27;s a good number of Azul clients using a Zing+Cassandra setup, so the price point is right for some people at the very least. Zing licence cost has also changed in recent years (3.5k per server last I looked, and that is before you haggle some bulk deal) so not sure if your impression is calibrated to that new price point.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16527349&amp;goto=item%3Fid%3D16523064%2316527349">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
      <tr class='athing comtr ' id='16523571'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16523571' href='vote?id=16523571&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=jjirsa" class="hnuser">jjirsa</a> <span class="age"><a href="item?id=16523571">15 hours ago</a></span> <span id="unv_16523571"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16523571)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Have friends who have used it, they report that it works reasonably well. Especially in p99.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523571&amp;goto=item%3Fid%3D16523064%2316523571">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16527146'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16527146' href='vote?id=16527146&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=truth_seeker" class="hnuser">truth_seeker</a> <span class="age"><a href="item?id=16527146">5 hours ago</a></span> <span id="unv_16527146"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16527146)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">By what factor&#x2F;magnitude p99 was improved ? Any idea ?<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16527146&amp;goto=item%3Fid%3D16523064%2316527146">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
      <tr class='athing comtr ' id='16523628'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16523628' href='vote?id=16523628&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=spockz" class="hnuser">spockz</a> <span class="age"><a href="item?id=16523628">15 hours ago</a></span> <span id="unv_16523628"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16523628)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Actually, it appears that is one of the premises[1] they sell Zing on.<p>[1]: <a href="https:&#x2F;&#x2F;www.azul.com&#x2F;solutions&#x2F;cassandra&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.azul.com&#x2F;solutions&#x2F;cassandra&#x2F;</a><span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523628&amp;goto=item%3Fid%3D16523064%2316523628">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
                <tr class='athing comtr ' id='16524879'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_16524879' href='vote?id=16524879&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=yazr" class="hnuser">yazr</a> <span class="age"><a href="item?id=16524879">13 hours ago</a></span> <span id="unv_16524879"></span><span class="par"></span> <a class="togg" n="3" href="javascript:void(0)" onclick="return toggle(event, 16524879)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Or just try and benchmark Azul VM with pause-less GCs ?!<p>(I have used Azul in low-latency production environments. It has pros and cons but it certainly beats re-writing the storage layer... )<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524879&amp;goto=item%3Fid%3D16523064%2316524879">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16527128'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16527128' href='vote?id=16527128&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=truth_seeker" class="hnuser">truth_seeker</a> <span class="age"><a href="item?id=16527128">5 hours ago</a></span> <span id="unv_16527128"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16527128)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Curious to know the cons of using it, except being commercial.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16527128&amp;goto=item%3Fid%3D16523064%2316527128">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16528117'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16528117' href='vote?id=16528117&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=manigandham" class="hnuser">manigandham</a> <span class="age"><a href="item?id=16528117">0 minutes ago</a></span> <span id="unv_16528117"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16528117)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">&gt; except being commercial<p>That&#x27;s the biggest, especially for when it&#x27;s a Facebook company. Otherwise it works well but can be pricey.<p>The JVM is getting a new fully concurrent collector though called Shenandoah: <a href="https:&#x2F;&#x2F;www.google.com&#x2F;search?q=shenandoah+gc" rel="nofollow">https:&#x2F;&#x2F;www.google.com&#x2F;search?q=shenandoah+gc</a><span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16528117&amp;goto=item%3Fid%3D16523064%2316528117">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
                  <tr class='athing comtr ' id='16526943'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_16526943' href='vote?id=16526943&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=welder" class="hnuser">welder</a> <span class="age"><a href="item?id=16526943">6 hours ago</a></span> <span id="unv_16526943"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16526943)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Great, now can you fix the Python Cassandra Driver to work in a multi-threaded application environment without the connection pooling bugs and default synchronous app-blocking (vs lazy-init) connection setup?<p><a href="https:&#x2F;&#x2F;github.com&#x2F;datastax&#x2F;python-driver" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;datastax&#x2F;python-driver</a><span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16526943&amp;goto=item%3Fid%3D16523064%2316526943">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
              <tr class='athing comtr ' id='16526462'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_16526462' href='vote?id=16526462&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=bfrog" class="hnuser">bfrog</a> <span class="age"><a href="item?id=16526462">8 hours ago</a></span> <span id="unv_16526462"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16526462)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Meanwhile scylladb looks like a better option for numerous reasons<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16526462&amp;goto=item%3Fid%3D16523064%2316526462">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
              <tr class='athing comtr ' id='16527273'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_16527273' href='vote?id=16527273&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=xuanyue" class="hnuser">xuanyue</a> <span class="age"><a href="item?id=16527273">4 hours ago</a></span> <span id="unv_16527273"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16527273)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Is there any trade off after replacing LSM tree-based storage engine to RocksDB storage engine?<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16527273&amp;goto=item%3Fid%3D16523064%2316527273">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16527371'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16527371' href='vote?id=16527371&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=irfansharif" class="hnuser">irfansharif</a> <span class="age"><a href="item?id=16527371">3 hours ago</a></span> <span id="unv_16527371"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16527371)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">RocksDB is also an LSM structured KV store.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16527371&amp;goto=item%3Fid%3D16523064%2316527371">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
                <tr class='athing comtr ' id='16526044'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_16526044' href='vote?id=16526044&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=steeve" class="hnuser">steeve</a> <span class="age"><a href="item?id=16526044">10 hours ago</a></span> <span id="unv_16526044"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16526044)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Why not use ScyllaDB ? (Serious)<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16526044&amp;goto=item%3Fid%3D16523064%2316526044">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
              <tr class='athing comtr ' id='16523467'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_16523467' href='vote?id=16523467&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=jjirsa" class="hnuser">jjirsa</a> <span class="age"><a href="item?id=16523467">16 hours ago</a></span> <span id="unv_16523467"></span><span class="par"></span> <a class="togg" n="9" href="javascript:void(0)" onclick="return toggle(event, 16523467)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Nicely done! Looking forward to the pluggable storage engine.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523467&amp;goto=item%3Fid%3D16523064%2316523467">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523603'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16523603' href='vote?id=16523603&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=pas" class="hnuser">pas</a> <span class="age"><a href="item?id=16523603">15 hours ago</a></span> <span id="unv_16523603"></span><span class="par"></span> <a class="togg" n="6" href="javascript:void(0)" onclick="return toggle(event, 16523603)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">The JIRA tickets don&#x27;t really shine with much hope :&#x2F;<p><a href="https:&#x2F;&#x2F;issues.apache.org&#x2F;jira&#x2F;browse&#x2F;CASSANDRA-13474" rel="nofollow">https:&#x2F;&#x2F;issues.apache.org&#x2F;jira&#x2F;browse&#x2F;CASSANDRA-13474</a> [2 comments from 2017 Apr]
<a href="https:&#x2F;&#x2F;issues.apache.org&#x2F;jira&#x2F;browse&#x2F;CASSANDRA-13475" rel="nofollow">https:&#x2F;&#x2F;issues.apache.org&#x2F;jira&#x2F;browse&#x2F;CASSANDRA-13475</a> [~100 comments, but the last one is from 2017 Nov, by the InstaG engineer]<p>And the Rocksandra fork is already ~3500 commits behind master, so upstreaming this will be interesting.<p>Oh, and the Rocksandra fork is already kind of abandoned - no commits since 2017 Dec. (which probably means this is not actually the code that runs under Instagram.)<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523603&amp;goto=item%3Fid%3D16523064%2316523603">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523693'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16523693' href='vote?id=16523693&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=dikanggu" class="hnuser">dikanggu</a> <span class="age"><a href="item?id=16523693">15 hours ago</a></span> <span id="unv_16523693"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16523693)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">This is the rocksandra branch, <a href="https:&#x2F;&#x2F;github.com&#x2F;Instagram&#x2F;cassandra&#x2F;tree&#x2F;rocks_3.0" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;Instagram&#x2F;cassandra&#x2F;tree&#x2F;rocks_3.0</a>, we develop it on top of Cassandra 3.0. It&#x27;s the code we are running on our production servers.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523693&amp;goto=item%3Fid%3D16523064%2316523693">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523863'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16523863' href='vote?id=16523863&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=pas" class="hnuser">pas</a> <span class="age"><a href="item?id=16523863">15 hours ago</a></span> <span id="unv_16523863"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16523863)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Thanks for the git push and the reply! A few minutes ago it was still pointing to the older commit.<p>And upstream Cassandra is already 11 minor releases away. Won&#x27;t that become a problem with something as fundamental&#x2F;low-level as pluggable storage engines?<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523863&amp;goto=item%3Fid%3D16523064%2316523863">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
      <tr class='athing comtr ' id='16523676'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16523676' href='vote?id=16523676&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=jjirsa" class="hnuser">jjirsa</a> <span class="age"><a href="item?id=16523676">15 hours ago</a></span> <span id="unv_16523676"></span><span class="par"></span> <a class="togg" n="3" href="javascript:void(0)" onclick="return toggle(event, 16523676)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">I&#x27;m a committer, I&#x27;m familiar with the JIRA ticket.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523676&amp;goto=item%3Fid%3D16523064%2316523676">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523947'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_16523947' href='vote?id=16523947&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=pas" class="hnuser">pas</a> <span class="age"><a href="item?id=16523947">14 hours ago</a></span> <span id="unv_16523947"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16523947)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Could you share your thoughts on how likely and how soon will the RocksDB engine be available as part of normal Cassandra? Also, how big is the gap between 3.0.x and 3.x? Any improvements between 3.0.x and 3.x regarding tail latency&#x2F;performance? Thanks!<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523947&amp;goto=item%3Fid%3D16523064%2316523947">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16524008'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="160"></td><td valign="top" class="votelinks"><center><a id='up_16524008' href='vote?id=16524008&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=jjirsa" class="hnuser">jjirsa</a> <span class="age"><a href="item?id=16524008">14 hours ago</a></span> <span id="unv_16524008"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16524008)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">I think it&#x27;s likely. It&#x27;s decidedly nontrivial, and the hardest part will be the (very slow) design phase where we actually make sure the interfaces are defined properly, but I think there are enough interested people to make sure it happens.<p>There are some meaningful changes between 3.0 and 3.11 (notably a compressed chunk cache for storing some intermediate data blocks and a significant change to the way the column index is deserialized) that do help tail latencies, and there&#x27;s certainly quite a bit more low hanging fruit, but the biggest contributor to p99 latencies is the GC collections, and the read path still contributes the most JVM garbage, so this is still probably a meaningful improvement over 3.11.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16524008&amp;goto=item%3Fid%3D16523064%2316524008">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
          <tr class='athing comtr ' id='16523633'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16523633' href='vote?id=16523633&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=kiril-me" class="hnuser">kiril-me</a> <span class="age"><a href="item?id=16523633">15 hours ago</a></span> <span id="unv_16523633"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16523633)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">It would be great. But I don&#x27;t think it could happen. The pluggable storage engine would greatly increase the cognitive complexity of the code.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523633&amp;goto=item%3Fid%3D16523064%2316523633">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523883'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16523883' href='vote?id=16523883&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=jjirsa" class="hnuser">jjirsa</a> <span class="age"><a href="item?id=16523883">15 hours ago</a></span> <span id="unv_16523883"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16523883)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Of course it could happen. Pluggable engine has a lot of positives - not only does it enable features like this, it also helps modularize the codebase making it more testable, and there are other people who will develop storage engines for their own use case over time (look at the evolution of - for example - MySQL storage backends for examples of this).<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523883&amp;goto=item%3Fid%3D16523064%2316523883">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
                  <tr class='athing comtr ' id='16527227'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_16527227' href='vote?id=16527227&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=ismail" class="hnuser">ismail</a> <span class="age"><a href="item?id=16527227">4 hours ago</a></span> <span id="unv_16527227"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16527227)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">So question:<p>Any thoughts on replacing HDFS + Yarn + Hive + HBASE 
with
GulsterFS + Kubernetes + Cassandra<p>??<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16527227&amp;goto=item%3Fid%3D16523064%2316527227">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16527919'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16527919' href='vote?id=16527919&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=ddorian43" class="hnuser">ddorian43</a> <span class="age"><a href="item?id=16527919">1 hour ago</a></span> <span id="unv_16527919"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16527919)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Hbase is sync+globally sorted, while cassandra is not, so probably not.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16527919&amp;goto=item%3Fid%3D16523064%2316527919">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
                <tr class='athing comtr ' id='16523493'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_16523493' href='vote?id=16523493&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=rbranson" class="hnuser">rbranson</a> <span class="age"><a href="item?id=16523493">15 hours ago</a></span> <span id="unv_16523493"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16523493)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Did you all find that there were changes to the Java heap&#x2F;GC configuration that would make tuning this setup different? I imagine if most everything that &quot;sticks&quot; is moved off heap, the GC could be tuned more heavily for young gen throughput vs trying to balance it with long-lived objects.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523493&amp;goto=item%3Fid%3D16523064%2316523493">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523608'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16523608' href='vote?id=16523608&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=dikanggu" class="hnuser">dikanggu</a> <span class="age"><a href="item?id=16523608">15 hours ago</a></span> <span id="unv_16523608"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16523608)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Yeah, for Rocksandra, we are able to use much smaller heap size, and most of the objects are recycled during the young gen GC.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523608&amp;goto=item%3Fid%3D16523064%2316523608">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
                          <tr class='athing comtr ' id='16523719'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_16523719' href='vote?id=16523719&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=cmrdporcupine" class="hnuser">cmrdporcupine</a> <span class="age"><a href="item?id=16523719">15 hours ago</a></span> <span id="unv_16523719"></span><span class="par"></span> <a class="togg" n="3" href="javascript:void(0)" onclick="return toggle(event, 16523719)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">I remember using quite early versions of Cassandra back in an ad-tech startup I was at back in 2009 or 2010, spending unfortunate amounts of time fighting the JVM GC and trying to tune things so it behaved responsibly. It was a real problem then and I know a lot of work went into fixing GC behaviour. Then I stopped using Cassandra for work, but it&#x27;s unfortunate this is still an issue?<p>What I took out of that is that I really feel like something like Cassandra is better suited to implementation in a language like C++ or Rust. And I believe others have since come along and done this.<p>I really liked the gossip-based federation in Cassandra though.<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523719&amp;goto=item%3Fid%3D16523064%2316523719">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523785'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_16523785' href='vote?id=16523785&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=estebank" class="hnuser">estebank</a> <span class="age"><a href="item?id=16523785">15 hours ago</a></span> <span id="unv_16523785"></span><span class="par"></span> <a class="togg" n="2" href="javascript:void(0)" onclick="return toggle(event, 16523785)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">It sounds like you might be interested in TiKV.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;pingcap&#x2F;tikv" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;pingcap&#x2F;tikv</a><span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523785&amp;goto=item%3Fid%3D16523064%2316523785">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
        <tr class='athing comtr ' id='16523864'><td>
            <table border='0'>  <tr>    <td class='ind'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_16523864' href='vote?id=16523864&amp;how=up&amp;goto=item%3Fid%3D16523064'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=cmrdporcupine" class="hnuser">cmrdporcupine</a> <span class="age"><a href="item?id=16523864">15 hours ago</a></span> <span id="unv_16523864"></span><span class="par"></span> <a class="togg" n="1" href="javascript:void(0)" onclick="return toggle(event, 16523864)"></a>          <span class='storyon'></span>
                  </span></div><br><div class="comment">
                  <span class="c00">Thanks.<p>Since coming to Google I don&#x27;t get the opportunity to compare&#x2F;evaluate&#x2F;deploy tools like this anymore. Smarter people than me make choices like that :-)<span>
              </span><div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=16523864&amp;goto=item%3Fid%3D16523064%2316523864">reply</a></u>
                  </font>
      </div></td></tr>
      </table></td></tr>
                </table>
      <br><br>
  </td></tr>
<tr><td><img src="s.gif" height="10" width="0"><table width="100%" cellspacing="0" cellpadding="1"><tr><td bgcolor="#ff6600"></td></tr></table><br><center><a href="https://www.ycombinator.com/apply/">
        Applications are open for YC Summer 2018
      </a></center><br><center><span class="yclinks"><a href="newsguidelines.html">Guidelines</a>
        | <a href="newsfaq.html">FAQ</a>
        | <a href="mailto:hn@ycombinator.com">Support</a>
        | <a href="https://github.com/HackerNews/API">API</a>
        | <a href="security.html">Security</a>
        | <a href="lists">Lists</a>
        | <a href="bookmarklet.html" rel="nofollow">Bookmarklet</a>
        | <a href="http://www.ycombinator.com/legal/">Legal</a>
        | <a href="http://www.ycombinator.com/apply/">Apply to YC</a>
        | <a href="mailto:hn@ycombinator.com">Contact</a></span><br><br><form method="get" action="//hn.algolia.com/">Search:
          <input type="text" name="q" value="" size="17" autocorrect="off" spellcheck="false" autocapitalize="off" autocomplete="false"></form>
            </center></td></tr>
      </table></center></body><script type='text/javascript' src='hn.js?ZlOjL55sRmhJBqfwi2jb'></script>
  </html>
